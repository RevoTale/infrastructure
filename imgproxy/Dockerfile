FROM ghcr.io/imgproxy/imgproxy:v3.30.1

ENV IMGPROXY_ALLOW_LOOPBACK_SOURCE_ADDRESSES=false \
    IMGPROXY_ALLOW_PRIVATE_SOURCE_ADDRESSES=true \
    IMGPROXY_DOWNLOAD_TIMEOUT=5s \
    IMGPROXY_READ_REQUEST_TIMEOUT=5s \
    IMGPROXY_TIMEOUT=5s \
    IMGPROXY_KEEP_ALIVE_TIMEOUT=5s \
    IMGPROXY_LOG_LEVEL=warn \
    IMGPROXY_AUTO_WEBP=true \
    IMGPROXY_USE_ETAG=true \
    IMGPROXY_AUTO_AVIF=true \
    IMGPROXY_PREFERRED_FORMATS=webp,jpeg,gif

EXPOSE 8080
