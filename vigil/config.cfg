[server]
log_level = "error"
inet = "0.0.0.0:8080"
workers = 4
manager_token = "${VIGIL_MANAGER_TOKEN}"
reporter_token = "${VIGIL_REPORTER_TOKEN}"

[assets]
path = "./res/assets/"

[branding]
page_title = "Status"
page_url = "https://board.${PROJECT_DOMAIN}"
company_name = "Status"
icon_color = "#1a9fff"
icon_url = "https://${PROJECT_DOMAIN}/favicon.ico"
logo_color = "#1a9fff"
logo_url = "https://${PROJECT_DOMAIN}/favicon.ico"
website_url = "https://${PROJECT_DOMAIN}"
support_url = "https://${PROJECT_DOMAIN}"

[metrics]
poll_interval = 60
poll_retry = 2
poll_http_status_healthy_above = 200
poll_http_status_healthy_below = 400
poll_delay_dead = 10
poll_search_healthy = ""

[probe]
collect_interval = 60
collect_cooldown = 300

[[probe.service]]
id = "core"
label = "Core"

[[probe.service.node]]
id = "root"
label = "Root"
mode = "poll"
replicas = [
  "https://${PROJECT_DOMAIN}"
]

[[probe.service.node]]
id = "notes"
label = "Notes"
mode = "poll"
replicas = [
  "https://notes.${PROJECT_DOMAIN}"
]

[[probe.service.node]]
id = "cms"
label = "CMS"
mode = "poll"
replicas = [
  "https://${PROJECT_DOMAIN}/admin"
]

[[probe.service]]
id = "services"
label = "Services"

[[probe.service.node]]
id = "watcharr"
label = "Watcharr"
mode = "poll"
replicas = [
  "https://tv.${PROJECT_DOMAIN}"
]

[[probe.service.node]]
id = "s3-storage"
label = "S3 Storage"
mode = "poll"
replicas = [
  "https://s3.${PROJECT_DOMAIN}/minio/health/live"
]

[[probe.service.node]]
id = "analytics"
label = "Analytics"
mode = "poll"
replicas = [
  "https://s.${PROJECT_DOMAIN}/"
]

[[probe.service.node]]
id = "admin-login"
label = "Admin Login"
mode = "poll"
replicas = [
  "https://${PROJECT_DOMAIN}/admin/login"
]

[[probe.service]]
id = "feeds"
label = "Feeds"

[[probe.service.node]]
id = "notes-rss"
label = "Notes RSS"
mode = "poll"
replicas = [
  "https://notes.${PROJECT_DOMAIN}/explore/rss.xml"
]
